# エンジンAPIでの作業

Engine APIは、コマンドラインクライアントがデーモンと通信するために使用するHTTP APIです。また、サードパーティーのソフトウェアがデーモンを制御するために使用することもできます。

このリポジトリにある様々なコンポーネントで構成されています：

- `api/swagger.yaml` APIをSwaggerで定義したもの。
- `api/types/` クライアントとサーバーの両方で共有されるタイプで、様々なオブジェクト、オプション、レスポンスなどを表現する。ほとんどは手動で記述されるが、一部はSwaggerの定義から自動生成される。これの進捗は[#27919](https://github.com/docker/docker/issues/27919)を参照してください。
- `cli/` コマンドラインクライアント。
- `client/` コマンドラインクライアントが使用するGoクライアントです。サードパーティのGoプログラムでも使用することができる。
- `daemon/` API を提供するデーモンです。

## Swaggerの定義

APIは `api/swagger.yaml` にある [Swagger](http://swagger.io/specification/) 定義によって定義される。この定義は、以下のような用途に使用できる：

1. ドキュメントを自動生成する。
2. 2.Goサーバとクライアントを自動生成する。(作業中です。)
3. APIができることをイントロスペクトしたり、他の言語用のクライアントを自動生成したりするために、APIの機械可読版を提供する。

## APIドキュメントの更新

APIドキュメントは、完全に `api/swagger.yaml` から生成されます。APIを更新する場合は、このファイルを編集して、ドキュメントに変更を反映させます。

このファイルは主に2つのセクションに分かれています：

- リクエストとレスポンスで使用される再利用可能なオブジェクトを定義する `definitions` 。
- リクエストとレスポンスで使用する再利用可能なオブジェクトを定義する `definitions` と、APIのエンドポイントを定義する `paths` (および再利用する必要のないいくつかのインラインオブジェクト)。

編集を行うには、まず `paths` の下にある編集したいエンドポイントを探し、必要な編集を行う。エンドポイントは `$ref` で再利用可能なオブジェクトを参照することができますが、これは `definitions` セクションで見つけることができます。

このファイルには、ファイルの他の場所から同様のパターンをコピーするのに十分なサンプル素材があることを期待しますが（新しいフィールドやエンドポイントの追加など）、完全なリファレンスについては、[Swagger仕様](https://github.com/docker/docker/issues/27919)を参照してください。

`swagger.yaml` は `hack/validate/swagger` によって検証され、有効なSwagger定義であることが確認されます。これは、編集を行う際に、自分が正しいことを行っているかどうかを確認するのに便利です。

## APIドキュメントの閲覧

`swagger.yaml`を編集した際に、生成されたAPIドキュメントが正しくレンダリングされるか確認したい場合があります。

`make swagger-docs`を実行すると、`http://localhost`でプレビューが実行されます。スタイリングの一部が正しくないかもしれませんが、正しいドキュメントが生成されていることを確認することができます。

本番のドキュメントは `swagger.yaml` を [docker/docker.github.io](https://github.com/docker/docker.github.io) にベンダリングすることで生成されています。


www.DeepL.com/Translator（無料版）で翻訳しました。


//!CHECK:SERVER:README:jp - this is server source of docker.